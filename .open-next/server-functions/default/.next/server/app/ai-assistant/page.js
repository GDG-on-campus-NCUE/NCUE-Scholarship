(()=>{var a={};a.id=320,a.ids=[320],a.modules={21:(a,b,c)=>{"use strict";c.d(b,{A:()=>m});var d=c(60687),e=c(43210),f=c.n(e),g=c(88920),h=c(92576),i=c(5336),j=c(43649);let k=(0,c(62688).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var l=c(11860);let m=({show:a,message:b,type:c="success",onClose:e})=>{f().useEffect(()=>{if(a){let a=setTimeout(()=>e(),5e3);return()=>clearTimeout(a)}},[a,e]);let m={success:{icon:(0,d.jsx)(i.A,{className:"w-6 h-6 text-emerald-500"}),style:"bg-emerald-50/70 border-emerald-200"},error:{icon:(0,d.jsx)(j.A,{className:"w-6 h-6 text-rose-500"}),style:"bg-rose-50/70 border-rose-200"},info:{icon:(0,d.jsx)(k,{className:"w-6 h-6 text-sky-500"}),style:"bg-sky-50/70 border-sky-200"}},n=m[c]||m.info;return(0,d.jsx)(g.N,{children:a&&(0,d.jsx)(h.P.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{type:"spring",stiffness:400,damping:25},className:"fixed top-24 right-4 sm:right-6 z-[9999] w-[calc(100%-2rem)] sm:w-auto max-w-md",children:(0,d.jsxs)("div",{className:`flex items-center p-4 rounded-xl border backdrop-blur-lg shadow-lg ${n.style}`,children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:n.icon}),(0,d.jsx)("div",{className:"ml-3 flex-1",children:(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:b})}),(0,d.jsx)("button",{onClick:e,className:"ml-4 p-1.5 text-gray-500 hover:text-gray-800 rounded-full hover:bg-black/10 transition-colors","aria-label":"Close",children:(0,d.jsx)(l.A,{className:"w-5 h-5"})})]})})})}},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},1637:(a,b,c)=>{Promise.resolve().then(c.bind(c,50602))},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11437:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},11860:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},11997:a=>{"use strict";a.exports=require("punycode")},18921:(a,b,c)=>{"use strict";c.d(b,{tm:()=>g});var d=c(95391);async function e(){try{let{data:{session:a}}=await d.N.auth.getSession();return a?.access_token||null}catch(a){return console.error("Error getting current token:",a),null}}async function f(a={}){let b=await e(),c={...a.headers};return c["Content-Type"]||c["content-type"]||a.body instanceof FormData||(c["Content-Type"]="application/json"),b&&(c.Authorization=`Bearer ${b}`),{...a,headers:c}}async function g(a,b={}){return fetch(a,await f(b))}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22798:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/hune1228/NCUE-Scholarship/NCUE-Scholarship/src/app/ai-assistant/page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hune1228/NCUE-Scholarship/NCUE-Scholarship/src/app/ai-assistant/page.jsx","default")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27900:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},41550:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},41862:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},43649:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},50602:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>aE});var d,e=c(60687),f=c(13389),g=c(43210),h=c(18921),i=c(21);let{entries:j,setPrototypeOf:k,isFrozen:l,getPrototypeOf:m,getOwnPropertyDescriptor:n}=Object,{freeze:o,seal:p,create:q}=Object,{apply:r,construct:s}="undefined"!=typeof Reflect&&Reflect;o||(o=function(a){return a}),p||(p=function(a){return a}),r||(r=function(a,b,c){return a.apply(b,c)}),s||(s=function(a,b){return new a(...b)});let t=H(Array.prototype.forEach),u=H(Array.prototype.lastIndexOf),v=H(Array.prototype.pop),w=H(Array.prototype.push),x=H(Array.prototype.splice),y=H(String.prototype.toLowerCase),z=H(String.prototype.toString),A=H(String.prototype.match),B=H(String.prototype.replace),C=H(String.prototype.indexOf),D=H(String.prototype.trim),E=H(Object.prototype.hasOwnProperty),F=H(RegExp.prototype.test),G=(d=TypeError,function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return s(d,b)});function H(a){return function(b){b instanceof RegExp&&(b.lastIndex=0);for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return r(a,b,d)}}function I(a,b){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;k&&k(a,null);let d=b.length;for(;d--;){let e=b[d];if("string"==typeof e){let a=c(e);a!==e&&(l(b)||(b[d]=a),e=a)}a[e]=!0}return a}function J(a){let b=q(null);for(let[c,d]of j(a))E(a,c)&&(Array.isArray(d)?b[c]=function(a){for(let b=0;b<a.length;b++)E(a,b)||(a[b]=null);return a}(d):d&&"object"==typeof d&&d.constructor===Object?b[c]=J(d):b[c]=d);return b}function K(a,b){for(;null!==a;){let c=n(a,b);if(c){if(c.get)return H(c.get);if("function"==typeof c.value)return H(c.value)}a=m(a)}return function(){return null}}let L=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Q=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R=o(["#text"]),S=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),T=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W=p(/\{\{[\w\W]*|[\w\W]*\}\}/gm),X=p(/<%[\w\W]*|[\w\W]*%>/gm),Y=p(/\$\{[\w\W]*/gm),Z=p(/^data-[\-\w.\u00B7-\uFFFF]+$/),$=p(/^aria-[\-\w]+$/),_=p(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),aa=p(/^(?:\w+script|data):/i),ab=p(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ac=p(/^html$/i);var ad=Object.freeze({__proto__:null,ARIA_ATTR:$,ATTR_WHITESPACE:ab,CUSTOM_ELEMENT:p(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:Z,DOCTYPE_NAME:ac,ERB_EXPR:X,IS_ALLOWED_URI:_,IS_SCRIPT_OR_DATA:aa,MUSTACHE_EXPR:W,TMPLIT_EXPR:Y});let ae={element:1,text:3,progressingInstruction:7,comment:8,document:9},af=function(a,b){if("object"!=typeof a||"function"!=typeof a.createPolicy)return null;let c=null,d="data-tt-policy-suffix";b&&b.hasAttribute(d)&&(c=b.getAttribute(d));let e="dompurify"+(c?"#"+c:"");try{return a.createPolicy(e,{createHTML:a=>a,createScriptURL:a=>a})}catch(a){return console.warn("TrustedTypes policy "+e+" could not be created."),null}},ag=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};var ah=function a(){let b,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,d=b=>a(b);if(d.version="3.2.6",d.removed=[],!c||!c.document||c.document.nodeType!==ae.document||!c.Element)return d.isSupported=!1,d;let{document:e}=c,f=e,g=f.currentScript,{DocumentFragment:h,HTMLTemplateElement:i,Node:k,Element:l,NodeFilter:m,NamedNodeMap:n=c.NamedNodeMap||c.MozNamedAttrMap,HTMLFormElement:p,DOMParser:r,trustedTypes:s}=c,H=l.prototype,W=K(H,"cloneNode"),X=K(H,"remove"),Y=K(H,"nextSibling"),Z=K(H,"childNodes"),$=K(H,"parentNode");if("function"==typeof i){let a=e.createElement("template");a.content&&a.content.ownerDocument&&(e=a.content.ownerDocument)}let aa="",{implementation:ab,createNodeIterator:ah,createDocumentFragment:ai,getElementsByTagName:aj}=e,{importNode:ak}=f,al=ag();d.isSupported="function"==typeof j&&"function"==typeof $&&ab&&void 0!==ab.createHTMLDocument;let{MUSTACHE_EXPR:am,ERB_EXPR:an,TMPLIT_EXPR:ao,DATA_ATTR:ap,ARIA_ATTR:aq,IS_SCRIPT_OR_DATA:ar,ATTR_WHITESPACE:as,CUSTOM_ELEMENT:at}=ad,{IS_ALLOWED_URI:au}=ad,av=null,aw=I({},[...L,...M,...N,...P,...R]),ax=null,ay=I({},[...S,...T,...U,...V]),az=Object.seal(q(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),aA=null,aB=null,aC=!0,aD=!0,aE=!1,aF=!0,aG=!1,aH=!0,aI=!1,aJ=!1,aK=!1,aL=!1,aM=!1,aN=!1,aO=!0,aP=!1,aQ=!0,aR=!1,aS={},aT=null,aU=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),aV=null,aW=I({},["audio","video","img","source","image","track"]),aX=null,aY=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),aZ="http://www.w3.org/1998/Math/MathML",a$="http://www.w3.org/2000/svg",a_="http://www.w3.org/1999/xhtml",a0=a_,a1=!1,a2=null,a3=I({},[aZ,a$,a_],z),a4=I({},["mi","mo","mn","ms","mtext"]),a5=I({},["annotation-xml"]),a6=I({},["title","style","font","a","script"]),a7=null,a8=["application/xhtml+xml","text/html"],a9=null,ba=null,bb=e.createElement("form"),bc=function(a){return a instanceof RegExp||a instanceof Function},bd=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ba||ba!==a){if(a&&"object"==typeof a||(a={}),a=J(a),a9="application/xhtml+xml"===(a7=-1===a8.indexOf(a.PARSER_MEDIA_TYPE)?"text/html":a.PARSER_MEDIA_TYPE)?z:y,av=E(a,"ALLOWED_TAGS")?I({},a.ALLOWED_TAGS,a9):aw,ax=E(a,"ALLOWED_ATTR")?I({},a.ALLOWED_ATTR,a9):ay,a2=E(a,"ALLOWED_NAMESPACES")?I({},a.ALLOWED_NAMESPACES,z):a3,aX=E(a,"ADD_URI_SAFE_ATTR")?I(J(aY),a.ADD_URI_SAFE_ATTR,a9):aY,aV=E(a,"ADD_DATA_URI_TAGS")?I(J(aW),a.ADD_DATA_URI_TAGS,a9):aW,aT=E(a,"FORBID_CONTENTS")?I({},a.FORBID_CONTENTS,a9):aU,aA=E(a,"FORBID_TAGS")?I({},a.FORBID_TAGS,a9):J({}),aB=E(a,"FORBID_ATTR")?I({},a.FORBID_ATTR,a9):J({}),aS=!!E(a,"USE_PROFILES")&&a.USE_PROFILES,aC=!1!==a.ALLOW_ARIA_ATTR,aD=!1!==a.ALLOW_DATA_ATTR,aE=a.ALLOW_UNKNOWN_PROTOCOLS||!1,aF=!1!==a.ALLOW_SELF_CLOSE_IN_ATTR,aG=a.SAFE_FOR_TEMPLATES||!1,aH=!1!==a.SAFE_FOR_XML,aI=a.WHOLE_DOCUMENT||!1,aL=a.RETURN_DOM||!1,aM=a.RETURN_DOM_FRAGMENT||!1,aN=a.RETURN_TRUSTED_TYPE||!1,aK=a.FORCE_BODY||!1,aO=!1!==a.SANITIZE_DOM,aP=a.SANITIZE_NAMED_PROPS||!1,aQ=!1!==a.KEEP_CONTENT,aR=a.IN_PLACE||!1,au=a.ALLOWED_URI_REGEXP||_,a0=a.NAMESPACE||a_,a4=a.MATHML_TEXT_INTEGRATION_POINTS||a4,a5=a.HTML_INTEGRATION_POINTS||a5,az=a.CUSTOM_ELEMENT_HANDLING||{},a.CUSTOM_ELEMENT_HANDLING&&bc(a.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(az.tagNameCheck=a.CUSTOM_ELEMENT_HANDLING.tagNameCheck),a.CUSTOM_ELEMENT_HANDLING&&bc(a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(az.attributeNameCheck=a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),a.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(az.allowCustomizedBuiltInElements=a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),aG&&(aD=!1),aM&&(aL=!0),aS&&(av=I({},R),ax=[],!0===aS.html&&(I(av,L),I(ax,S)),!0===aS.svg&&(I(av,M),I(ax,T),I(ax,V)),!0===aS.svgFilters&&(I(av,N),I(ax,T),I(ax,V)),!0===aS.mathMl&&(I(av,P),I(ax,U),I(ax,V))),a.ADD_TAGS&&(av===aw&&(av=J(av)),I(av,a.ADD_TAGS,a9)),a.ADD_ATTR&&(ax===ay&&(ax=J(ax)),I(ax,a.ADD_ATTR,a9)),a.ADD_URI_SAFE_ATTR&&I(aX,a.ADD_URI_SAFE_ATTR,a9),a.FORBID_CONTENTS&&(aT===aU&&(aT=J(aT)),I(aT,a.FORBID_CONTENTS,a9)),aQ&&(av["#text"]=!0),aI&&I(av,["html","head","body"]),av.table&&(I(av,["tbody"]),delete aA.tbody),a.TRUSTED_TYPES_POLICY){if("function"!=typeof a.TRUSTED_TYPES_POLICY.createHTML)throw G('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof a.TRUSTED_TYPES_POLICY.createScriptURL)throw G('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');aa=(b=a.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===b&&(b=af(s,g)),null!==b&&"string"==typeof aa&&(aa=b.createHTML(""));o&&o(a),ba=a}},be=I({},[...M,...N,...O]),bf=I({},[...P,...Q]),bg=function(a){let b=$(a);b&&b.tagName||(b={namespaceURI:a0,tagName:"template"});let c=y(a.tagName),d=y(b.tagName);return!!a2[a.namespaceURI]&&(a.namespaceURI===a$?b.namespaceURI===a_?"svg"===c:b.namespaceURI===aZ?"svg"===c&&("annotation-xml"===d||a4[d]):!!be[c]:a.namespaceURI===aZ?b.namespaceURI===a_?"math"===c:b.namespaceURI===a$?"math"===c&&a5[d]:!!bf[c]:a.namespaceURI===a_?(b.namespaceURI!==a$||!!a5[d])&&(b.namespaceURI!==aZ||!!a4[d])&&!bf[c]&&(a6[c]||!be[c]):"application/xhtml+xml"===a7&&!!a2[a.namespaceURI])},bh=function(a){w(d.removed,{element:a});try{$(a).removeChild(a)}catch(b){X(a)}},bi=function(a,b){try{w(d.removed,{attribute:b.getAttributeNode(a),from:b})}catch(a){w(d.removed,{attribute:null,from:b})}if(b.removeAttribute(a),"is"===a)if(aL||aM)try{bh(b)}catch(a){}else try{b.setAttribute(a,"")}catch(a){}},bj=function(a){let c=null,d=null;if(aK)a="<remove></remove>"+a;else{let b=A(a,/^[\r\n\t ]+/);d=b&&b[0]}"application/xhtml+xml"===a7&&a0===a_&&(a='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+a+"</body></html>");let f=b?b.createHTML(a):a;if(a0===a_)try{c=new r().parseFromString(f,a7)}catch(a){}if(!c||!c.documentElement){c=ab.createDocument(a0,"template",null);try{c.documentElement.innerHTML=a1?aa:f}catch(a){}}let g=c.body||c.documentElement;return(a&&d&&g.insertBefore(e.createTextNode(d),g.childNodes[0]||null),a0===a_)?aj.call(c,aI?"html":"body")[0]:aI?c.documentElement:g},bk=function(a){return ah.call(a.ownerDocument||a,a,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},bl=function(a){return a instanceof p&&("string"!=typeof a.nodeName||"string"!=typeof a.textContent||"function"!=typeof a.removeChild||!(a.attributes instanceof n)||"function"!=typeof a.removeAttribute||"function"!=typeof a.setAttribute||"string"!=typeof a.namespaceURI||"function"!=typeof a.insertBefore||"function"!=typeof a.hasChildNodes)},bm=function(a){return"function"==typeof k&&a instanceof k};function bn(a,b,c){t(a,a=>{a.call(d,b,c,ba)})}let bo=function(a){let b=null;if(bn(al.beforeSanitizeElements,a,null),bl(a))return bh(a),!0;let c=a9(a.nodeName);if(bn(al.uponSanitizeElement,a,{tagName:c,allowedTags:av}),aH&&a.hasChildNodes()&&!bm(a.firstElementChild)&&F(/<[/\w!]/g,a.innerHTML)&&F(/<[/\w!]/g,a.textContent)||a.nodeType===ae.progressingInstruction||aH&&a.nodeType===ae.comment&&F(/<[/\w]/g,a.data))return bh(a),!0;if(!av[c]||aA[c]){if(!aA[c]&&bq(c)&&(az.tagNameCheck instanceof RegExp&&F(az.tagNameCheck,c)||az.tagNameCheck instanceof Function&&az.tagNameCheck(c)))return!1;if(aQ&&!aT[c]){let b=$(a)||a.parentNode,c=Z(a)||a.childNodes;if(c&&b){let d=c.length;for(let e=d-1;e>=0;--e){let d=W(c[e],!0);d.__removalCount=(a.__removalCount||0)+1,b.insertBefore(d,Y(a))}}}return bh(a),!0}return a instanceof l&&!bg(a)||("noscript"===c||"noembed"===c||"noframes"===c)&&F(/<\/no(script|embed|frames)/i,a.innerHTML)?(bh(a),!0):(aG&&a.nodeType===ae.text&&(b=a.textContent,t([am,an,ao],a=>{b=B(b,a," ")}),a.textContent!==b&&(w(d.removed,{element:a.cloneNode()}),a.textContent=b)),bn(al.afterSanitizeElements,a,null),!1)},bp=function(a,b,c){if(aO&&("id"===b||"name"===b)&&(c in e||c in bb))return!1;if(aD&&!aB[b]&&F(ap,b));else if(aC&&F(aq,b));else if(!ax[b]||aB[b]){if(!(bq(a)&&(az.tagNameCheck instanceof RegExp&&F(az.tagNameCheck,a)||az.tagNameCheck instanceof Function&&az.tagNameCheck(a))&&(az.attributeNameCheck instanceof RegExp&&F(az.attributeNameCheck,b)||az.attributeNameCheck instanceof Function&&az.attributeNameCheck(b))||"is"===b&&az.allowCustomizedBuiltInElements&&(az.tagNameCheck instanceof RegExp&&F(az.tagNameCheck,c)||az.tagNameCheck instanceof Function&&az.tagNameCheck(c))))return!1}else if(aX[b]);else if(F(au,B(c,as,"")));else if(("src"===b||"xlink:href"===b||"href"===b)&&"script"!==a&&0===C(c,"data:")&&aV[a]);else if(aE&&!F(ar,B(c,as,"")));else if(c)return!1;return!0},bq=function(a){return"annotation-xml"!==a&&A(a,at)},br=function(a){bn(al.beforeSanitizeAttributes,a,null);let{attributes:c}=a;if(!c||bl(a))return;let e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ax,forceKeepAttr:void 0},f=c.length;for(;f--;){let{name:g,namespaceURI:h,value:i}=c[f],j=a9(g),k="value"===g?i:D(i);if(e.attrName=j,e.attrValue=k,e.keepAttr=!0,e.forceKeepAttr=void 0,bn(al.uponSanitizeAttribute,a,e),k=e.attrValue,aP&&("id"===j||"name"===j)&&(bi(g,a),k="user-content-"+k),aH&&F(/((--!?|])>)|<\/(style|title)/i,k)){bi(g,a);continue}if(e.forceKeepAttr)continue;if(!e.keepAttr||!aF&&F(/\/>/i,k)){bi(g,a);continue}aG&&t([am,an,ao],a=>{k=B(k,a," ")});let l=a9(a.nodeName);if(!bp(l,j,k)){bi(g,a);continue}if(b&&"object"==typeof s&&"function"==typeof s.getAttributeType)if(h);else switch(s.getAttributeType(l,j)){case"TrustedHTML":k=b.createHTML(k);break;case"TrustedScriptURL":k=b.createScriptURL(k)}if(k!==i)try{h?a.setAttributeNS(h,g,k):a.setAttribute(g,k),bl(a)?bh(a):v(d.removed)}catch(b){bi(g,a)}}bn(al.afterSanitizeAttributes,a,null)},bs=function a(b){let c=null,d=bk(b);for(bn(al.beforeSanitizeShadowDOM,b,null);c=d.nextNode();)bn(al.uponSanitizeShadowNode,c,null),bo(c),br(c),c.content instanceof h&&a(c.content);bn(al.afterSanitizeShadowDOM,b,null)};return d.sanitize=function(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=null,g=null,i=null,j=null;if((a1=!a)&&(a="\x3c!--\x3e"),"string"!=typeof a&&!bm(a))if("function"==typeof a.toString){if("string"!=typeof(a=a.toString()))throw G("dirty is not a string, aborting")}else throw G("toString is not a function");if(!d.isSupported)return a;if(aJ||bd(c),d.removed=[],"string"==typeof a&&(aR=!1),aR){if(a.nodeName){let b=a9(a.nodeName);if(!av[b]||aA[b])throw G("root node is forbidden and cannot be sanitized in-place")}}else if(a instanceof k)(g=(e=bj("\x3c!----\x3e")).ownerDocument.importNode(a,!0)).nodeType===ae.element&&"BODY"===g.nodeName||"HTML"===g.nodeName?e=g:e.appendChild(g);else{if(!aL&&!aG&&!aI&&-1===a.indexOf("<"))return b&&aN?b.createHTML(a):a;if(!(e=bj(a)))return aL?null:aN?aa:""}e&&aK&&bh(e.firstChild);let l=bk(aR?a:e);for(;i=l.nextNode();)bo(i),br(i),i.content instanceof h&&bs(i.content);if(aR)return a;if(aL){if(aM)for(j=ai.call(e.ownerDocument);e.firstChild;)j.appendChild(e.firstChild);else j=e;return(ax.shadowroot||ax.shadowrootmode)&&(j=ak.call(f,j,!0)),j}let m=aI?e.outerHTML:e.innerHTML;return aI&&av["!doctype"]&&e.ownerDocument&&e.ownerDocument.doctype&&e.ownerDocument.doctype.name&&F(ac,e.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+e.ownerDocument.doctype.name+">\n"+m),aG&&t([am,an,ao],a=>{m=B(m,a," ")}),b&&aN?b.createHTML(m):m},d.setConfig=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bd(a),aJ=!0},d.clearConfig=function(){ba=null,aJ=!1},d.isValidAttribute=function(a,b,c){return ba||bd({}),bp(a9(a),a9(b),c)},d.addHook=function(a,b){"function"==typeof b&&w(al[a],b)},d.removeHook=function(a,b){if(void 0!==b){let c=u(al[a],b);return -1===c?void 0:x(al[a],c,1)[0]}return v(al[a])},d.removeHooks=function(a){al[a]=[]},d.removeAllHooks=function(){al=ag()},d}();let ai=({content:a})=>{let[b,c]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{c(!0)},[]),!a||!b)return null;let d=ah.sanitize(a,{ADD_ATTR:["style","class","target"],ALLOWED_CSS_PROPERTIES:["color"]});return(0,e.jsx)("div",{className:"rich-text-content prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:d}})};var aj=c(95391),ak=c(43649),al=c(62688);let am=(0,al.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),an=(0,al.A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),ao=({id:a})=>{let[b,c]=(0,g.useState)(null),[d,f]=(0,g.useState)(!0),[h,i]=(0,g.useState)(null);if((0,g.useEffect)(()=>{if(!a){f(!1),i("未提供公告 ID。");return}(async()=>{f(!0),i(null);let{data:b,error:d}=await aj.N.from("announcements").select("id, title, summary, application_end_date").eq("id",a).single();d?(console.error("Error fetching announcement:",d),i("無法載入公告資訊。")):c(b),f(!1)})()},[a]),d)return(0,e.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg shadow-sm animate-pulse h-24"});if(h||!b)return(0,e.jsxs)("div",{className:"p-3 border border-red-200 bg-red-50 rounded-lg text-sm text-red-600 flex items-center gap-2",children:[(0,e.jsx)(ak.A,{size:16}),(0,e.jsx)("span",{children:h||"找不到指定的公告。"})]});let j=b.application_end_date?new Date(b.application_end_date).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):null,k=`https://scholarship.ncuesa.org.tw/?announcement_id=${b.id}`;return(0,e.jsxs)("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"group block p-4 border border-gray-200 rounded-lg shadow-sm bg-white transition-all duration-300 ease-in-out hover:scale-[1.01] hover:shadow-lg hover:border-violet-300 hover:bg-violet-50",children:[(0,e.jsxs)("div",{className:"flex justify-between items-start",children:[(0,e.jsx)("h4",{className:"font-bold text-gray-800 transition-colors group-hover:text-violet-600",children:b.title}),(0,e.jsx)(am,{size:16,className:"text-gray-400 transition-colors group-hover:text-violet-500 flex-shrink-0 ml-2 mt-1"})]}),(0,e.jsx)("div",{className:"mt-3 text-sm text-gray-700 rich-text-content",dangerouslySetInnerHTML:{__html:b.summary||""}}),(0,e.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center text-xs text-gray-500",children:j&&(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(an,{size:14}),(0,e.jsxs)("span",{children:["截止日期：",j]})]})})]})},ap=(0,al.A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var aq=c(58869);let ar=({message:a,user:b,isLoading:c=!1})=>{let[d,f]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{f(!0)},[]),c)return(0,e.jsxs)("div",{className:"flex items-start gap-3 max-w-2xl w-full",children:[(0,e.jsxs)("div",{className:"flex flex-col items-center w-10 flex-shrink-0",children:[(0,e.jsx)("div",{className:"relative w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center gemini-avatar-glow",children:(0,e.jsx)("div",{className:"w-full h-full bg-white rounded-full flex items-center justify-center",children:(0,e.jsx)(ap,{size:20,className:"text-gray-600"})})}),(0,e.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"Gemini"})]}),(0,e.jsxs)("div",{className:"p-3 bg-gray-100 rounded-2xl flex items-center gap-2 mt-1",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,e.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:0.1s]"}),(0,e.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:0.2s]"})]})]});if(!a)return null;let h="user"===a.role,i=h?b?.user_metadata?.name||"User":"Gemini",j=i.charAt(0).toUpperCase(),k="";try{k=new Date(a.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(a){}let l=[],m=a.content.replace(/\[ANNOUNCEMENT_CARD:([\w,-]+)\]/g,(a,b)=>(l.push(...b.split(",")),"")).trim(),n=[...new Set(l)];return(0,e.jsxs)("div",{className:`flex items-start gap-3 ${h?"flex-row-reverse ml-auto":""} max-w-2xl w-full`,children:[(0,e.jsxs)("div",{className:"flex flex-col items-center w-10 flex-shrink-0",children:[(0,e.jsx)("div",{className:`relative w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-white font-bold
                    ${h?"bg-purple-400":""}`,children:h?b?.user_metadata?.name?j:(0,e.jsx)(aq.A,{size:20}):(0,e.jsx)("div",{className:"w-full h-full bg-white rounded-full flex items-center justify-center border-2 border-gray-200",children:(0,e.jsx)(ap,{size:20,className:"text-gray-600"})})}),(0,e.jsx)("p",{className:"text-xs text-gray-500 mt-1.5 whitespace-nowrap",children:i})]}),(0,e.jsxs)("div",{className:`flex flex-col w-[calc(100%-52px)] ${h?"items-end":"items-start"}`,children:[(0,e.jsx)("div",{className:`px-4 py-3 rounded-2xl w-fit max-w-full
                    ${h?"bg-purple-500 text-white":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"prose prose-sm max-w-none prose-p:my-2 prose-ul:my-2 prose-ol:my-2 prose-table:my-4",children:(0,e.jsx)(ai,{content:m})}),n.length>0&&(0,e.jsx)("div",{className:"mt-3 pt-3 border-t border-t-black/10 space-y-3",children:n.map(a=>(0,e.jsx)(ao,{id:a.trim()},a))})]})}),k&&(0,e.jsx)("p",{className:"text-xs text-gray-400 mt-1.5 px-2",children:k})]})]})};var as=c(41550),at=c(88233),au=c(27900);let av=({onSubmit:a,onClear:b,isLoading:c,onSupportRequest:d,hasStarted:f})=>{let[h,i]=(0,g.useState)("");return(0,e.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-4",children:[f&&(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsxs)("button",{type:"button",onClick:d,disabled:c,title:"AI 無法解決？尋求承辦人員協助",className:"group flex items-center space-x-2 px-4 py-1.5 rounded-full text-xs font-semibold border border-purple-300 text-purple-600  transition-all duration-300 ease-in-out shadow-sm  hover:bg-purple-50 hover:border-purple-400 hover:shadow-lg hover:shadow-purple-500/20 disabled:bg-gray-100 disabled:border-gray-300 disabled:text-gray-400 disabled:shadow-none focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,e.jsx)(as.A,{size:14}),(0,e.jsx)("span",{children:"AI 無法解決？尋求承辦人員協助"})]})}),(0,e.jsxs)("form",{onSubmit:b=>{b.preventDefault(),h.trim()&&!c&&(a(h),i(""))},className:"relative flex items-center w-full",children:[(0,e.jsx)("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10",children:(0,e.jsxs)("button",{type:"button",onClick:b,disabled:c,title:"刪除對話紀錄",className:"group flex items-center space-x-1.5 rounded-full h-10 px-3 text-xs text-gray-500 transition-colors hover:bg-red-50 hover:text-red-600 disabled:opacity-50",children:[(0,e.jsx)(at.A,{size:16}),(0,e.jsx)("span",{className:"hidden sm:inline",children:"刪除紀錄"})]})}),(0,e.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"詢問獎學金相關問題...",disabled:c,className:"w-full bg-white border border-gray-200 rounded-full py-4 pl-12 sm:pl-28 pr-14 text-base text-gray-800 placeholder-gray-400 transition-shadow duration-300 shadow-md focus:outline-none input-focus-glow"}),(0,e.jsx)("button",{type:"submit",disabled:c||!h.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 flex-shrink-0 bg-gradient-to-br from-purple-500 to-indigo-500 text-white rounded-full flex items-center justify-center transition-all duration-300 disabled:opacity-50 disabled:scale-90 hover:from-purple-600 hover:to-indigo-600 focus:outline-none focus:ring-4 focus:ring-purple-300",children:(0,e.jsx)(au.A,{size:18})})]})]})};var aw=c(58887),ax=c(41862),ay=c(85814),az=c.n(ay);let aA=(0,al.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var aB=c(11437);let aC=()=>{let{user:a}=(0,f.A)(),[b,c]=(0,g.useState)([]),[d,j]=(0,g.useState)(!1),[k,l]=(0,g.useState)(!0),[m,n]=(0,g.useState)(null),o=(0,g.useRef)(null),p=(0,g.useRef)(null),q=!k&&b.length>0,r=(0,g.useCallback)(()=>{o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[]),s=(0,g.useCallback)(async()=>{if(!a)return void l(!1);l(!0);try{let a=await (0,h.tm)("/api/chat-history"),b=await a.json();b.success&&b.data.length>0&&c(b.data.map(a=>({role:a.role,content:a.message_content,timestamp:a.timestamp})))}catch(a){n({message:"載入歷史紀錄失敗",type:"error"})}finally{l(!1)}},[a]);(0,g.useEffect)(()=>{s()},[s]),(0,g.useEffect)(()=>{let a=setTimeout(()=>{r()},100);return()=>clearTimeout(a)},[b,k,r]);let t=async a=>{let e=a.trim();if(!e||d)return;let f={role:"user",content:e,timestamp:new Date().toISOString()};c(a=>[...a,f]),j(!0);try{let a=[...b].map(a=>({role:a.role,message_content:a.content})),d=await (0,h.tm)("/api/chat",{method:"POST",body:JSON.stringify({message:e,history:a})}),f=await d.json();if(!d.ok)throw Error(f.error||"AI 回應時發生錯誤");c(a=>[...a,{role:"model",content:f.response,timestamp:new Date().toISOString()}])}catch(a){c(a=>[...a,{role:"model",content:"抱歉，發生錯誤，請稍後再試。",timestamp:new Date().toISOString()}]),n({message:a.message,type:"error"})}finally{j(!1)}},u=async()=>{if(!d){if(0===b.length)return void alert("請先開始對話，才能尋求支援喔！");if(window.confirm("您確定要將目前的對話紀錄傳送給獎學金承辦人員嗎？")){j(!0);try{let a=await (0,h.tm)("/api/send-support-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:b})}),c=await a.json();if(!a.ok)throw Error(c.error||"請求傳送失敗");n({message:c.message,type:"success"})}catch(a){n({message:`錯誤：${a.message}`,type:"error"})}finally{j(!1)}}}},v=async()=>{if(!d&&window.confirm("您確定要清除所有對話紀錄嗎？此操作無法復原。")){j(!0);try{let a=await (0,h.tm)("/api/chat-history",{method:"DELETE"}),b=await a.json();if(!a.ok)throw Error(b.error||"清除失敗");c([]),n({message:"對話紀錄已清除",type:"success"})}catch(a){n({message:a.message,type:"error"})}finally{j(!1)}}};return(0,e.jsxs)("div",{className:"flex flex-col flex-1 bg-white overflow-hidden",children:[(0,e.jsx)("div",{ref:o,className:"flex-1 overflow-y-auto p-4 md:p-6 chat-scroll-fade",children:(0,e.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[k?(0,e.jsx)("div",{className:"flex justify-center items-center h-full pt-20",children:(0,e.jsx)(ax.A,{className:"animate-spin text-indigo-500",size:32})}):0===b.length?(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(()=>(0,e.jsxs)("div",{className:"flex flex-col justify-center items-center h-full text-center p-4 sm:p-8 max-w-2xl mx-auto",children:[(0,e.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-2xl mb-5 flex items-center justify-center",children:(0,e.jsx)(aw.A,{size:32,className:"text-indigo-500"})}),(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"彰師 AI 獎學金助理"}),(0,e.jsx)("p",{className:"text-gray-500 mt-2 text-sm",children:"Powered by Gemini 2.5 Flash"}),(0,e.jsx)("div",{className:"text-left space-y-8 mt-8 text-gray-700",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-semibold text-gray-800 mb-4 text-base",children:"為您精準查找獎學金資訊的智慧流程"}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("div",{className:"flex-shrink-0 mt-1 mr-4 w-8 h-8 flex items-center justify-center bg-indigo-100 rounded-full",children:(0,e.jsx)(aA,{size:18,className:"text-indigo-600"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-semibold text-gray-800",children:"內部知識庫優先"}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:"優先於校內獎學金資料庫進行語意搜尋，透過 AI 評分，提供最直接相關的公告資訊。"})]})]}),(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("div",{className:"flex-shrink-0 mt-1 mr-4 w-8 h-8 flex items-center justify-center bg-green-100 rounded-full",children:(0,e.jsx)(aB.A,{size:18,className:"text-green-600"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-semibold text-gray-800",children:"外部網路檢索"}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:"若內部資料不足或相關性低，系統將自動擴大搜尋範圍至外部網路，整合可信的公開資訊。"})]})]}),(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("div",{className:"flex-shrink-0 mt-1 mr-4 w-8 h-8 flex items-center justify-center bg-amber-100 rounded-full",children:(0,e.jsx)(ap,{size:18,className:"text-amber-600"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-semibold text-gray-800",children:"AI 統整生成"}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:"彙整所有檢索資訊作為上下文，最終生成一段條理分明、引述來源的客觀答覆。"})]})]})]})]})}),(0,e.jsxs)("div",{className:"mt-10 text-xs text-gray-500 border-t border-gray-200 pt-6 w-full text-center",children:[(0,e.jsxs)("p",{className:"font-semibold text-red-600 flex items-center justify-center",children:[(0,e.jsx)(ak.A,{size:14,className:"mr-1.5"}),"AI 生成內容免責聲明"]}),(0,e.jsxs)("p",{className:"mt-2 leading-relaxed",children:["AI 生成內容僅供參考，不構成任何形式的建議、保證或法律意見。",(0,e.jsx)("br",{className:"hidden md:block"}),(0,e.jsx)("span",{className:"inline-block mt-1 md:mt-0",children:"您有最終責任詳閱原始公告內容，並自行核實所有資訊的正確性。"}),(0,e.jsx)("br",{className:"hidden md:block"}),(0,e.jsxs)("span",{className:"inline-block mt-1 md:mt-0",children:["開始使用本服務即代表您已詳閱並同意我們的",(0,e.jsx)(az(),{href:"/terms-and-privacy",target:"_blank",className:"text-indigo-600 font-semibold hover:underline mx-1",children:"服務條款"}),"。"]})]})]})]}),{})}):b.map((b,c)=>(0,e.jsx)(ar,{message:b,user:a},c)),d&&b.length>0&&"user"===b[b.length-1].role&&(0,e.jsx)(ar,{isLoading:!0,message:{role:"model",content:"",timestamp:new Date().toISOString()},user:a}),(0,e.jsx)("div",{ref:p})]})}),(0,e.jsx)("div",{className:"p-4 bg-white flex-shrink-0",children:(0,e.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,e.jsx)(av,{onSubmit:t,onClear:v,isLoading:d,onSupportRequest:u,hasStarted:q})})}),m&&(0,e.jsx)(i.A,{show:!!m,message:m.message,type:m.type,onClose:()=>n(null)})]})};var aD=c(16189);function aE(){let{isAuthenticated:a,loading:b}=(0,f.A)();return((0,aD.useRouter)(),b)?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-gray-600",children:"載入中..."})]})}):a?(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - var(--header-height, 80px))"},children:(0,e.jsx)(aC,{})}):null}},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},58869:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67181:(a,b,c)=>{"use strict";function d({children:a}){return a}c.r(b),c.d(b,{default:()=>d})},74075:a=>{"use strict";a.exports=require("zlib")},78335:()=>{},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},81410:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(16133),C=c.n(B),D=c(30893),E=c(52836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["ai-assistant",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,22798)),"/Users/hune1228/NCUE-Scholarship/NCUE-Scholarship/src/app/ai-assistant/page.jsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,67181)),"/Users/hune1228/NCUE-Scholarship/NCUE-Scholarship/src/app/ai-assistant/layout.jsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,39769)),"/Users/hune1228/NCUE-Scholarship/NCUE-Scholarship/src/app/layout.jsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,16133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,80849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["/Users/hune1228/NCUE-Scholarship/NCUE-Scholarship/src/app/ai-assistant/page.jsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/ai-assistant/page",pathname:"/ai-assistant",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/ai-assistant/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},81630:a=>{"use strict";a.exports=require("http")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},88233:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88485:(a,b,c)=>{Promise.resolve().then(c.bind(c,22798))},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},96487:()=>{}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[985,102,183,628],()=>b(b.s=81410));module.exports=c})();