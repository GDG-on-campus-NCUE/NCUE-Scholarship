(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{6654:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let a=s(12115);function l(e,t){let s=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=s.current;e&&(s.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(s.current=n(e,a)),t&&(l.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19877:(e,t,s)=>{Promise.resolve().then(s.bind(s,79202))},45749:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});var a=s(55647);let l="https://scholarship-api.ncuesa.org.tw",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzU0NDA5NjAwLCJleHAiOjE5MTIxNzYwMDB9.jqoKh3OJbr8hsKd1CTuz6UcEPGuzO_gZEL9HT67q_GY";if(!l||!n)throw console.error("Supabase configuration:",{url:l,hasAnonKey:!!n}),Error("Missing Supabase environment variables. Please check your .env.local file.");console.log("[SUPABASE-CLIENT] Configured with URL:",l);let r=(0,a.UU)(l,n)},69074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},79202:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(95155),l=s(66766),n=s(12115),r=s(35695),i=s(45749),o=s(38274),c=s(60760),d=s(10081),x=s(39881),m=s(58832),h=s(19946);let g=(0,h.A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var u=s(47924),p=s(51154),b=s(66474),f=s(52278),j=s(42355),y=s(13052),v=s(12767),N=s(25671),w=s(54416),_=s(69074),k=s(12486),A=s(17580);let C=(0,h.A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var S=s(38164),I=s(81640);let z={A:{bg:"bg-red-100",text:"text-red-800"},B:{bg:"bg-orange-100",text:"text-orange-800"},C:{bg:"bg-yellow-100",text:"text-yellow-800"},D:{bg:"bg-green-100",text:"text-green-800"},E:{bg:"bg-blue-100",text:"text-blue-800"},F:{bg:"bg-indigo-100",text:"text-indigo-800"},G:{bg:"bg-violet-100",text:"text-violet-800"},default:{bg:"bg-gray-100",text:"text-gray-800"}},D=e=>z[e]||z.default;function E(e){var t;let{isOpen:s,onClose:l,announcement:r}=e;(0,n.useEffect)(()=>(s?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[s]);let i=(0,n.useMemo)(()=>{if(!(null==r?void 0:r.external_urls))return[];try{let e=JSON.parse(r.external_urls);if(Array.isArray(e))return e.filter(e=>e.url&&"string"==typeof e.url)}catch(e){if("string"==typeof r.external_urls&&r.external_urls.startsWith("http"))return[{url:r.external_urls}]}return[]},[r]),d=(0,n.useMemo)(()=>{if(!r)return{displayString:"未指定",colorClass:"text-gray-600"};let e=new Date;e.setHours(0,0,0,0);let t=r.application_end_date?new Date(r.application_end_date):null,s=r.application_start_date?new Date(r.application_start_date):null,a="text-green-600";null===t?a="text-green-600":t<e?a="text-red-600":s&&s>e&&(a="text-red-600");let l=r.application_start_date?new Date(r.application_start_date).toLocaleDateString("en-CA"):null,n=r.application_end_date?new Date(r.application_end_date).toLocaleDateString("en-CA"):"無期限";return{displayString:l?"".concat(l," ~ ").concat(n):n||"未指定",colorClass:a}},[r]),x=(0,n.useMemo)(()=>r&&r.summary||"無詳細內容",[r]);if(!s||!r)return null;let m=(0,a.jsx)(I.A,{announcement:r,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-semibold border border-violet-300 bg-white/80 backdrop-blur-sm text-violet-700 rounded-lg transition-all duration-300 ease-in-out transform hover:bg-violet-100 hover:text-violet-800 hover:-translate-y-0.5 hover:scale-105 hover:shadow-lg hover:shadow-violet-500/30"});return(0,a.jsx)(c.N,{children:s&&(0,a.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex justify-center items-start sm:items-center overflow-y-auto p-0 sm:p-4",onClick:l,children:[(0,a.jsx)("style",{children:"\n                        /* This rule hides the site header and prevents background scroll when the modal is open */\n                        body.modal-open {\n                            overflow: hidden;\n                        }\n                        body.modal-open .header-fixed {\n                            display: none;\n                        }\n                        .rich-text-content table {\n                            display: block;\n                            max-width: 100%;\n                            overflow-x: auto;\n                            white-space: nowrap;\n                        }\n                        .rich-text-content img {\n                            max-width: 100%;\n                            height: auto;\n                        }\n                        /* Hide scrollbar */\n                        .hide-scrollbar::-webkit-scrollbar {\n                            display: none;\n                        }\n                        .hide-scrollbar {\n                            -ms-overflow-style: none;\n                            scrollbar-width: none;\n                        }\n                    "}),(0,a.jsxs)(o.P.div,{initial:{scale:.95,y:-20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:20,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"bg-white/85 backdrop-blur-lg w-full h-full sm:h-auto sm:max-h-[calc(100vh-4rem)] sm:w-full sm:max-w-4xl sm:rounded-2xl sm:shadow-2xl flex flex-col relative",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-5 border-b border-black/10 flex justify-between items-center gap-4 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"flex-shrink-0 inline-flex items-center justify-center h-8 w-8 rounded-lg text-sm font-bold ".concat(D(r.category).bg," ").concat(D(r.category).text),children:r.category}),(0,a.jsx)("h2",{className:"text-base md:text-xl font-bold text-gray-800",children:r.title})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:(0,a.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 p-2 rounded-full transition-colors",children:(0,a.jsx)(w.A,{size:20})})})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 md:p-8 space-y-8 overflow-y-auto hide-scrollbar pb-24",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-10 gap-x-8 gap-y-6 text-sm",children:[(0,a.jsxs)("div",{className:"sm:col-span-3 flex flex-col gap-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-indigo-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-500",children:"申請期間"}),(0,a.jsx)("p",{className:"font-bold text-sm ".concat(d.colorClass),children:d.displayString})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 text-indigo-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-500",children:"送件方式"}),(0,a.jsx)("p",{className:"text-gray-800",children:r.submission_method||"未指定"})]})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-7 flex items-start gap-3",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-indigo-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-500",children:"適用對象"}),(0,a.jsx)("div",{className:"text-gray-800 rich-text-content",dangerouslySetInnerHTML:{__html:r.target_audience||"未指定"}})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-200"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-indigo-700 border-l-4 border-indigo-500 pl-3 mb-3",children:"詳細內容"}),(0,a.jsx)("div",{className:"rich-text-content",dangerouslySetInnerHTML:{__html:x}})]}),(null==(t=r.attachments)?void 0:t.length)>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-indigo-700 border-l-4 border-indigo-500 pl-3 mb-3",children:"相關附件"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.attachments.map(e=>(0,a.jsxs)("a",{href:(e=>{if(!e)return"#";let t=e.split("/"),s=t[t.length-1];return"/api/attachments/".concat(s)})(e.stored_file_path),target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-3 bg-slate-100 hover:bg-indigo-100 hover:border-indigo-300 border border-transparent p-3 rounded-lg text-indigo-800 font-medium transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-lg",children:[(0,a.jsx)(C,{className:"h-5 w-5 flex-shrink-0 text-indigo-500 group-hover:text-indigo-600 transition-colors"}),(0,a.jsx)("span",{className:"truncate flex-1",children:e.file_name}),(0,a.jsx)("span",{className:"text-xs text-indigo-500/80 opacity-0 group-hover:opacity-100 transition-opacity",children:"點擊下載"})]},e.id))})]}),i.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-indigo-700 border-l-4 border-indigo-500 pl-3 mb-3",children:"外部連結"}),(0,a.jsx)("div",{className:"space-y-2",children:i.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-3 text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 transform group-hover:rotate-[-45deg] transition-transform flex-shrink-0"}),(0,a.jsx)("span",{className:"break-all group-hover:underline",children:e.url})]},t))})]})]}),(0,a.jsx)("div",{className:"hidden sm:block absolute bottom-6 right-6 z-10",children:m})]}),(0,a.jsx)("div",{className:"sm:hidden fixed bottom-6 right-6 z-50",children:m})]})})}let M={A:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300"},B:{bg:"bg-orange-100",text:"text-orange-800",border:"border-orange-300"},C:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300"},D:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300"},E:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-300"},F:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-300"},G:{bg:"bg-violet-100",text:"text-violet-800",border:"border-violet-300"},default:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300"}},L=e=>M[e]||M.default,O=e=>{if(!e)return"長期";let t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1;return"".concat(a>=8?s-1911:s-1912,"-").concat(a>=2&&a<=7?2:1)},P=e=>{let{limitations:t}=e;return t?"Y"===t?(0,a.jsx)("span",{className:"text-green-600",children:"可兼領"}):(0,a.jsx)("span",{className:"text-red-600",children:"不可兼領"}):(0,a.jsx)("span",{className:"text-gray-500",children:"未指定"})},T=e=>{let{item:t,className:s}=e,l=t.application_start_date,n=t.application_end_date,r=n?new Date(n).toLocaleDateString("en-CA"):"無期限",i=l?"".concat(new Date(l).toLocaleDateString("en-CA")," ~ ").concat(r):r;return(0,a.jsx)("div",{className:s,children:i})};function H(){let e=(0,r.useSearchParams)(),t=(0,r.useRouter)(),[s,l]=(0,n.useState)([]),[h,w]=(0,n.useState)(!0),[_,k]=(0,n.useState)(!1),[A,C]=(0,n.useState)("open"),[S,I]=(0,n.useState)(""),[z,D]=(0,n.useState)(1),[M,H]=(0,n.useState)(10),[R,U]=(0,n.useState)(0),[B,F]=(0,n.useState)({column:"application_end_date",ascending:!0}),[G,J]=(0,n.useState)("all"),[Y,q]=(0,n.useState)(null),[K,V]=(0,n.useState)(!1),[W,X]=(0,n.useState)(null),Z=(0,n.useRef)({}),Q=(0,n.useRef)(!0),[$,ee]=(0,n.useState)(new Set),et=(0,n.useCallback)(async()=>{k(!0);let e=i.N.from("announcements").select("*, attachments(*)",{count:"exact"}).eq("is_active",!0);S&&(e=e.or("title.ilike.%".concat(S,"%,summary.ilike.%").concat(S,"%,target_audience.ilike.%").concat(S,"%")));let t=new Date().toISOString().slice(0,10);"open"===A?e=e.or("application_end_date.gte.".concat(t,",application_end_date.is.null")):"expired"===A&&(e=e.lt("application_end_date",t)),"all"!==G&&(e=e.eq("category",G));let s="semester"===B.column?"application_end_date":B.column,a={ascending:B.ascending,nullsFirst:!1};e=e.order(s,a);let n=(z-1)*M,r=n+M-1;e=e.range(n,r);let{data:o,error:c,count:d}=await e;c?(console.error("Error fetching announcements:",c),l([]),U(0)):(l((o||[]).map(e=>({...e,semester:O(null==e?void 0:e.application_end_date)}))),U(d||0)),k(!1)},[S,A,z,M,B,G]);(0,n.useEffect)(()=>{Q.current||et()},[z,M,B,A,S,et]),(0,n.useEffect)(()=>{(async()=>{w(!0);let t=e.get("announcement_id");if(t){C("all"),q(t);let{data:e,error:s}=await i.N.from("announcements").select("*, attachments(*)").eq("id",t).single();e&&!s?ea(e):console.error("Could not fetch announcement from URL parameter:",s)}await et(),w(!1),Q.current=!1})()},[]),(0,n.useEffect)(()=>{let a=e.get("announcement_id");if(a&&!Q.current&&s.length>0){let e=Z.current[a];e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"}),t.replace("/",{shallow:!0})},300)}},[s]);let es=e=>{F(t=>({column:e,ascending:t.column!==e||!t.ascending})),D(1)},ea=e=>{ee(t=>new Set(t).add(e.id)),X({...e,semester:O(e.application_end_date)}),V(!0)},el=e=>B.column!==e?(0,a.jsx)(d.A,{className:"h-4 w-4 ml-1 text-gray-400"}):B.ascending?(0,a.jsx)(x.A,{className:"h-4 w-4 ml-1 text-indigo-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 ml-1 text-indigo-600"}),en=e=>{let t=new Date;t.setHours(0,0,0,0);let s=e.application_end_date?new Date(e.application_end_date):null,a=e.application_start_date?new Date(e.application_start_date):null;return null===s?"text-green-600":s<t||a&&a>t?"text-red-600":"text-green-600"},er=Math.ceil(R/M);return(0,a.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-lg border border-slate-200/80 rounded-2xl p-6 mb-8 shadow-sm",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(g,{size:22,className:"text-indigo-500"}),"獎助學金分類代碼定義"]}),(0,a.jsxs)("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-3 text-slate-600",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-red-600",children:"A："}),"各縣市政府獎助學金"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-orange-500",children:"B："}),"縣市政府以外之各級公家機關及公營單位獎助學金"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-yellow-500",children:"C："}),"宗教及民間各項指定身分獎助學金"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-green-600",children:"D："}),"非公家機關或其他無法歸類的獎助學金"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-blue-600",children:"E："}),"本校獲配推薦名額獎助學金"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-indigo-600",children:"F："}),"校外獎助學金得獎公告"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{class:"font-semibold text-purple-600",children:"G："}),"校內獎助學金"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-auto md:flex-1 md:max-w-md",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-gray-400 absolute left-4 top-1/2 -translate-y-1/2"}),(0,a.jsx)("input",{type:"text",placeholder:"搜尋公告標題、摘要、適用對象...",value:S,onChange:e=>I(e.target.value),className:"w-full pl-12 pr-4 py-2.5 bg-white border border-gray-300 rounded-lg shadow-sm transition-all duration-300 focus:border-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-500/30"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:G,onChange:e=>{J(e.target.value),D(1)},className:"appearance-none w-full bg-slate-100 border border-transparent rounded-lg py-2 pl-4 pr-10 text-sm font-medium text-slate-700 shadow-sm transition-all duration-300 focus:outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/30",children:[(0,a.jsx)("option",{value:"all",children:"全部分類"}),["A","B","C","D","E","F","G"].map(e=>(0,a.jsxs)("option",{value:e,children:["分類 ",e]},e))]}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-slate-100 p-1 rounded-lg",children:[(0,a.jsx)(N.A,{variant:"open"===A?"primary":"ghost",size:"sm",onClick:()=>{C("open"),D(1)},children:"未逾期"}),(0,a.jsx)(N.A,{variant:"all"===A?"primary":"ghost",size:"sm",onClick:()=>{C("all"),D(1)},children:"全部公告"}),(0,a.jsx)(N.A,{variant:"expired"===A?"primary":"ghost",size:"sm",onClick:()=>{C("expired"),D(1)},children:"已逾期"})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl w-full bg-white shadow-lg overflow-hidden border border-gray-200/80",children:[(0,a.jsxs)("div",{className:"hidden md:block relative",children:[_&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-20 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 font-semibold",children:[(0,a.jsx)(p.A,{className:"animate-spin h-5 w-5"}),"處理中..."]})}),(0,a.jsxs)("table",{className:"w-full text-sm table-fixed",children:[(0,a.jsx)("thead",{className:"bg-gray-50/70 text-left",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 px-6 font-semibold text-gray-500 cursor-pointer w-[10%]",onClick:()=>es("semester"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["學期 ",el("semester")]})}),(0,a.jsx)("th",{className:"p-4 px-6 font-semibold text-gray-500 w-[25%]",children:"獎助學金資料"}),(0,a.jsx)("th",{className:"p-4 px-6 font-semibold text-gray-500 w-[35%]",children:"適用對象"}),(0,a.jsx)("th",{className:"p-4 px-6 font-semibold text-gray-500 w-[10%]",children:"兼領限制"}),(0,a.jsx)("th",{className:"p-4 px-6 font-semibold text-gray-500 cursor-pointer w-[20%]",onClick:()=>es("application_end_date"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["申請期限 / 送件方式 ",el("application_end_date")]})})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:h?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:"5",className:"text-center p-16 text-gray-500",children:[(0,a.jsx)(p.A,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),"載入中..."]})}):(s||[]).filter(e=>e&&e.id).map(e=>{let t=$.has(e.id);return(0,a.jsxs)("tr",{ref:t=>Z.current[e.id]=t,onClick:()=>ea(e),className:"transform transition-all duration-300 hover:bg-violet-100/50 hover:shadow-2xl z-0 hover:z-10 hover:scale-[1.01] cursor-pointer ".concat(t?"bg-gray-100 text-gray-500":""),children:[(0,a.jsx)("td",{className:"p-4 px-6 font-medium align-top",children:e.semester}),(0,a.jsx)("td",{className:"p-4 px-6 align-top",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"flex-shrink-0 mt-1 inline-flex items-center justify-center h-8 w-8 rounded-lg text-sm font-bold ".concat(L(e.category).bg," ").concat(t?"opacity-60":""," ").concat(L(e.category).text," border ").concat(L(e.category).border),children:e.category}),(0,a.jsx)("p",{className:"font-semibold ".concat(t?"":"text-gray-900"),children:e.title})]})}),(0,a.jsx)("td",{className:"p-4 px-6 text-sm align-top",children:(0,a.jsx)("div",{className:"line-clamp-3",dangerouslySetInnerHTML:{__html:e.target_audience}})}),(0,a.jsx)("td",{className:"p-4 px-6 text-sm font-bold align-top",children:(0,a.jsx)(P,{limitations:e.application_limitations})}),(0,a.jsxs)("td",{className:"p-4 px-6 text-sm align-top",children:[(0,a.jsx)(T,{item:e,className:"font-bold ".concat(en(e))}),(0,a.jsx)("div",{className:"mt-1 ".concat(t?"":"text-slate-500"),children:e.submission_method})]})]},e.id)})})]})]}),(0,a.jsx)("div",{className:"md:hidden flex flex-col gap-3 p-3",children:h?(0,a.jsxs)("div",{className:"p-10 text-center text-gray-500",children:[(0,a.jsx)(p.A,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"載入中..."]}):(s||[]).filter(e=>e&&e.id).map(e=>{let t=Y===e.id,s=$.has(e.id),l=L(e.category);return(0,a.jsxs)(o.P.div,{layout:!0,ref:t=>Z.current[e.id]=t,className:"rounded-lg transition-all duration-300 border ".concat(t?"shadow-xl ring-2 ring-indigo-400":"shadow-md border-gray-200/60"," ").concat(s?"bg-gray-100 text-gray-500":"bg-white"),children:[(0,a.jsx)("button",{onClick:()=>q(t?null:e.id),className:"w-full text-left p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center h-7 w-7 rounded-md text-xs font-bold ".concat(l.bg," ").concat(l.text," ").concat(s?"opacity-60":""),children:e.category}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"學期 ".concat(e.semester)})]}),(0,a.jsx)("h3",{className:"font-bold text-base ".concat(s?"":"text-gray-800"),children:e.title})]}),(0,a.jsx)(b.A,{className:"h-5 w-5 text-gray-400 mt-1 flex-shrink-0 transition-transform duration-300 ".concat(t?"rotate-180":"")})]})}),(0,a.jsx)(c.N,{children:t&&(0,a.jsx)(o.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"pt-2 pb-4 px-4 border-t border-gray-200 space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-gray-500 mb-1",children:"申請期限"}),(0,a.jsx)(T,{item:e,className:"font-bold ".concat(en(e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-gray-500 mb-1",children:"適用對象"}),(0,a.jsx)("div",{className:"line-clamp-3 text-gray-700",dangerouslySetInnerHTML:{__html:e.target_audience}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-gray-500 mb-1",children:"兼領限制"}),(0,a.jsx)("div",{className:"font-bold",children:(0,a.jsx)(P,{limitations:e.application_limitations})})]}),(0,a.jsx)("div",{className:"pt-2 flex justify-end",children:(0,a.jsx)(N.A,{size:"sm",onClick:()=>ea(e),children:"查看詳細內容"})})]})})})]},e.id)})}),0===s.length&&!h&&(0,a.jsx)("div",{className:"p-16 text-center text-gray-500",children:"無符合條件的公告。"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["共 ",R," 筆資料，第 ",z," / ",er||1," 頁"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{value:M,onChange:e=>{H(Number(e.target.value)),D(1)},className:"appearance-none w-full bg-white border border-gray-300 rounded-lg py-2 pl-4 pr-10 text-sm shadow-sm transition-all duration-300 focus:outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/30",children:[10,25,50].map(e=>(0,a.jsxs)("option",{value:e,children:[e," 筆 / 頁"]},e))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,a.jsx)("button",{onClick:()=>D(1),disabled:1===z,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 disabled:opacity-50",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>D(e=>e-1),disabled:1===z,className:"relative inline-flex items-center px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 disabled:opacity-50",children:(0,a.jsx)(j.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>D(e=>e+1),disabled:z>=er,className:"relative inline-flex items-center px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 disabled:opacity-50",children:(0,a.jsx)(y.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>D(er),disabled:z>=er,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 disabled:opacity-50",children:(0,a.jsx)(v.A,{className:"h-5 w-5"})})]})]})]}),(0,a.jsx)(E,{isOpen:K,onClose:()=>{V(!1),e.get("announcement_id")&&t.replace("/",{shallow:!0})},announcement:W})]})}function R(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"w-full flex items-center justify-center py-24",children:(0,a.jsx)("div",{className:"h-12 w-12 border-4 border-gray-300 border-t-indigo-600 rounded-full animate-spin"})}),children:(0,a.jsx)(H,{})})}function U(){return(0,a.jsxs)("div",{className:"w-full bg-slate-50 font-sans min-h-screen",children:[(0,a.jsx)("div",{className:"relative w-full",children:(0,a.jsx)(l.default,{src:"/banner.jpg",alt:"NCUE Banner",width:4e3,height:862,priority:!0,className:"w-full h-auto",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/4000x862/e2e8f0/475569?text=Banner+Image"}})}),(0,a.jsx)("main",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"w-full mt-16 mb-16",children:[(0,a.jsx)(o.P.h2,{className:"text-3xl font-bold mb-8 text-center text-slate-800",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.5},children:"獎助學金公告一覽表"}),(0,a.jsx)(R,{})]})})]})}}},e=>{e.O(0,[4792,8247,9788,1746,4436,4677,1658,6766,3093,2514,8441,5964,7358],()=>e(e.s=19877)),_N_E=e.O()}]);